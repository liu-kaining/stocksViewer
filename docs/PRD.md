stocksViewer MVP – Product Requirements Document
===============================================

1. Overview
-----------

stocksViewer 是一款基于 Alpha Vantage 数据源的美股查询与决策辅助网站。首个最小可行版本（MVP）聚焦于实时行情、历史走势、基础技术指标展示，并为后续接入 AI 能力（DeepSeek、Qwen）打下基础。

2. Goals
--------

- 向用户提供快速、可靠的个股基础信息和历史走势。
- 支持常用技术指标的可视化，帮助用户进行初步技术分析。
- 建立统一配置中心，集中管理数据源和未来 AI 服务的接入信息。
- 采用可扩展的框架和结构，为后续高级功能（智能提醒、AI 分析）预留空间。

3. Target Users
---------------

- 关注美股市场的个人投资者、学生、量化入门者。
- 希望快速查看基本面和技术面数据的用户。
- 计划尝试将 AI 能力引入投研流程的开发者或小团队。

4. Scope – MVP Features
-----------------------

### 4.1 股票概览
- 通过输入股票代码，展示实时价格、涨跌幅、成交量等核心指标。
- 展示公司概况（行业、市值、利润、简介等），帮助用户快速了解基本面。
- 允许在页面顶部快速切换股票。

### 4.2 历史行情与图表
- 提供 1D、1W、1M、3M、1Y、Max 等快捷时间区间，并支持自定义时间范围。
- 使用 ECharts 绘制 K 线（或折线）与成交量图，提供调整/未调整数据切换。
- 对已交易完成的历史数据执行持久化缓存，避免重复调用 API。
- 用户可一键清空历史数据缓存。

### 4.3 基础技术指标
- 支持常用指标（SMA、EMA、RSI、MACD）叠加或独立展示。
- 指标参数可在页面通过控件（滑块/输入框）调整，并即时刷新图表。
- 指标数据同样缓存，减少重复请求。

### 4.4 配置中心
- 页面提供 Alpha Vantage API Key 输入与测试功能，展示当前调用限额提醒。
- 管理历史数据缓存策略（TTL、刷新间隔）和 UI 偏好（主题、默认时间区间）。
- 管理 DeepSeek、Qwen 接入信息：开关、API Key、Endpoint、模型选择、连通性测试。
- 提供“一键清空历史数据缓存”操作。

5. Out of Scope (MVP)
---------------------

- 用户登录、多用户数据隔离。
- 自选股组合管理、收益追踪。
- 实时推送/提醒、自动化交易。
- 全面的新闻情绪分析与 AI 报告生成（仅做接口预留）。

6. User Experience & UI
-----------------------

### 首页布局（桌面端）
1. 顶部导航：
   - 左侧 Logo/项目名。
   - 中央股票搜索框（支持模糊提示）。
   - 右侧按钮：配置页入口、主题切换、AI 分析入口（预留）。
2. 第一行卡片区：
   - 股票实时信息卡（价格、涨跌幅、成交量、更新时间）。
   - 公司概况卡（行业、市值、市盈率、简介）。
3. 第二行主体图表区：
   - ECharts 主图（K 线 / 折线可切换）。
   - 子图：成交量柱状图、技术指标曲线。
   - 图表顶部：时间区间快捷按钮、指标开关、调整模式切换。
4. 图表侧边 / 下方控制面板：
   - 指标列表（复选框）与参数调节控件。
   - 数据刷新按钮、缓存状态提示。
5. 页面底部预留区域：
   - 最新新闻/AI 摘要（占位符，后续迭代使用）。

### 配置页布局
1. 顶部标题栏：返回首页按钮、保存/重置按钮、状态提示。
2. Alpha Vantage 区域：API Key 输入、测试按钮、默认区间与刷新间隔设置。
3. 缓存策略：历史数据 TTL、实时数据缓存时间、一键清空按钮。
4. AI 配置：
   - 深度卡片样式：DeepSeek、Qwen 的启用开关、Key、Endpoint、模型选择、测试按钮。
   - 提示词模板输入框（为未来 AI 分析预留）。
5. UI 偏好：主题选择、是否默认展示 AI 面板等。

7. Success Metrics
------------------

- 用户能在 3 秒内加载出目标股票的概览与基础图表。
- 历史数据请求首次调用后，后续命中本地缓存的成功率 ≥ 80%。
- 配置页对 API Key 测试成功率达 100%（在 Key 有效的条件下）。
- 系统提示能明确反馈缓存命中/失败、API 速率限制等状态。

8. Dependencies
---------------

- Alpha Vantage API 与 API Key。
- Flask 框架、ECharts、SQLite。
- 部分指标依赖 Alpha Vantage 技术指标接口。

9. Risks & Mitigations
----------------------

- **API 限流**：整合请求队列与缓存策略，降低频繁调用。
- **数据延迟**：通过 UI 提示“数据更新时间”，向用户说明时效性。
- **配置错误**：提供测试按钮和错误提示，避免无效 Key 影响体验。
- **后续 AI 接入变更**：通过统一 schema 与服务封装减少改动范围。

10. Future Enhancements
-----------------------

- 自选股管理、价格提醒、策略组合分析。
- 新闻/财报解析与 AI 自动摘要。
- 深度 AI 分析（生成投资建议、风险提示）。
- 多终端适配与用户账号体系。

